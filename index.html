
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Welcome to CommAI-env’s documentation! &#8212; CommAI-env 0.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="How to create a new task" href="creating_tasks.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="creating_tasks.html" title="How to create a new task"
             accesskey="N">next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">CommAI-env 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="welcome-to-commai-env-s-documentation">
<h1>Welcome to CommAI-env’s documentation!<a class="headerlink" href="#welcome-to-commai-env-s-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The code in the CommAI-env models a simulation scenario in which a
<strong>Learner</strong> communicates with an <strong>Environment</strong> who impersonates a teacher
asking the Learner to perform tasks and rewarding it when it does so. The tasks
are performed through natural language communication, in the same way as the
instructions are given. The communication is performed through a low-level
signal, where characters are encoded as bit sequences. The responsible for the
encoding and decoding of these sequences are the <strong>InputChannel</strong> and
<strong>OutputChannel</strong> objects in the Environment. The Learner and the
Environment will interchange (exactly) one bit at a time. Obviously, one of them
should have nothing to say while the other is speaking. Therefore, a particular
bit sequence is going to represent “being silent”. Indeed, all the competition
is centered around assigning meaning to particular sequences of bits that
encode natural language commands.</p>
<p>The communication between the Learner and the Environment is handled by the
<strong>Session</strong>, which forwards the bits produced by each of the participants and
the rewards given to the Learner. For each bit sent, the Session blocks
waiting for the next bit to be sent back. The cumulative rewards and time steps
are recorded for performance evaluation.</p>
<p>A Learner is just any object that can handle a <cite>next</cite> method, which
given a bit it returns its next bit, and a <cite>reward</cite> method that informs the
learner about a received reward.</p>
<p>The Environment, on the other hand, executes one <strong>Task</strong> at a time based on a
<em>Scheduler</em>’s decision. A Task is defined through a set of messages and rewards
that are delivered to the Learner by the Environment as a reaction to different
kinds of Events. The possible events are described throughly in <a class="reference internal" href="creating_tasks.html#events"><span class="std std-ref">Event Handlers</span></a>.
To capture these events, the Environment registers <strong>Triggers</strong> to an
<strong>EventManager</strong>. The <strong>Triggers</strong> consist simply on: a type of event,
a condition to filter out events by specific details and a callback function
that will be invoked when an Event arrises. When an event is handled by
some function, it can either modify some internal variables to keep track
of some information, or interact with the learner by either setting the message
that is being sent through the Environment’s Output Channel and/or <em>set the
reward to end the current task</em>. If the reward is given together with a message,
the Environment sends out the message and then rewards the learner just before
switching to the next task. During this “extra time” no other events are
processed. Also, events can be handled concurrently. This implies that
different (conflicting) messages (and rewards) could be sent to the learner.
Conflicts are solved through defining a priority for the messages.</p>
<p>Finally, a Task can run within a certain World. A World, is composed
ultimately of the same elements of a Task: some state variables and
Triggers and can interact with the Learner. The goal of this entity is to have
consistent across tasks states and behaviors. A Task can access the state
variables of the world, and listen for changes on them. The World, on the other
hand, cannot access the Task that is being run on.</p>
</div>
</div>
<div class="section" id="running-the-competition">
<h1>Running the competition<a class="headerlink" href="#running-the-competition" title="Permalink to this headline">¶</a></h1>
<p>To run the competition, create a configuration file for the task scheduling,
for example, by copying the sample file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="n">tasks_config</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">json</span> <span class="n">tasks_config</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>Then, run it with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">run</span><span class="o">.</span><span class="n">py</span> <span class="n">tasks_config</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-the-competition">
<h1>Testing the competition<a class="headerlink" href="#testing-the-competition" title="Permalink to this headline">¶</a></h1>
<p>If you are running Python 2.7+ you can run all the unit tests by going to <cite>src</cite>
directory and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span>
</pre></div>
</div>
</div>
<div class="section" id="meta-documentation">
<h1>Meta-documentation<a class="headerlink" href="#meta-documentation" title="Permalink to this headline">¶</a></h1>
<p>To regenerate a local copy of these documents, do, depending on whether you
want html or pdf docs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">src</span><span class="o">/</span><span class="n">docs</span>
<span class="n">make</span> <span class="n">html</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">src</span><span class="o">/</span><span class="n">docs</span>
<span class="n">make</span> <span class="n">latexpdf</span>
</pre></div>
</div>
<p>This documentation can be made publicly available at the URL
<a class="reference external" href="https://facebookresearch.github.io/CommAI-env/">https://facebookresearch.github.io/CommAI-env/</a> simply by checking out
the GitHub repo and running the following command at the root of the project:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">gh</span><span class="o">-</span><span class="n">pages</span>
</pre></div>
</div>
</div>
<div class="section" id="debugging">
<h1>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h1>
<p>A useful tool for debugging is to log what it has been going on. You can log
anything from your tasks by:</p>
<ol class="arabic">
<li><p>Add import logging to the top of the file</p></li>
<li><dl class="simple">
<dt>Create your logger by doing (possibly inside the __init__ method)</dt><dd><p><cite>self.logger = logging.getLogger(__name__)</cite>. Strictly speaking you could send
any string to the getLogger function, which stands for the name of your logger,
but in this way you just send the name of your working file name, which is
clean and save you from thinking of a name.</p>
</dd>
</dl>
</li>
<li><p>Whenever you need to log something within your task you can do:</p>
<blockquote>
<div><ul class="simple">
<li><p>self.logger.debug(“spam, spam, spam, eggs, bacon and spam”) to log at the DEBUG level</p></li>
<li><p>self.logger.info(“spam, spam, spam, eggs, bacon and spam”) to log at the INFO level</p></li>
<li><p>self.logger.warn(“spam, spam, spam, eggs, bacon and spam”) to log at the WARNING level</p></li>
<li><p>self.logger.error(“spam, spam, spam, eggs, bacon and spam”) to log at the ERROR level</p></li>
</ul>
<p>The outputs of the loggers are saved to the files errors.log
(only messages at the ERROR level), info.log (messages with INFO, WARNING and
ERROR level) and debug.log (all messages).</p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="contents">
<h1>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h1>
<p>Contents:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="creating_tasks.html">How to create a new task</a><ul>
<li class="toctree-l2"><a class="reference internal" href="creating_tasks.html#creating-your-task-step-by-step">Creating your task step-by-step</a></li>
<li class="toctree-l2"><a class="reference internal" href="creating_tasks.html#event-handlers">Event Handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="creating_tasks.html#state-variables">State variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="creating_tasks.html#defining-event-handlers-at-runtime">Defining Event Handlers at “runtime”</a></li>
<li class="toctree-l2"><a class="reference internal" href="creating_tasks.html#action-primitives">Action Primitives</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="creating_tasks.html#guidelines-for-the-competition-tasks">Guidelines for the Competition tasks</a></li>
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to CommAI-env’s documentation!</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-the-competition">Running the competition</a></li>
<li><a class="reference internal" href="#testing-the-competition">Testing the competition</a></li>
<li><a class="reference internal" href="#meta-documentation">Meta-documentation</a></li>
<li><a class="reference internal" href="#debugging">Debugging</a></li>
<li><a class="reference internal" href="#contents">Contents</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="creating_tasks.html"
                        title="next chapter">How to create a new task</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="creating_tasks.html" title="How to create a new task"
             >next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">CommAI-env 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Facebook.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.2.
    </div>
  </body>
</html>